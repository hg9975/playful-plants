"use strict";(self["webpackChunkhot_pot_project"]=self["webpackChunkhot_pot_project"]||[]).push([[491],{1491:function(t,a,e){e.r(a),e.d(a,{default:function(){return h}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"camera-box"},[e("b-container",{staticClass:"header"},[e("b-row",[e("b-col",{attrs:{cols:"1",offset:"0"}},[e("b-button",{staticClass:"ml-0 close",attrs:{variant:"outline-secondary"},on:{click:function(a){return t.close()}}},[e("b-icon",{attrs:{icon:"arrow-left"}})],1)],1),e("b-col",{staticClass:"px-0",attrs:{offset:"8"}},[e("b-button",{staticClass:"upload",attrs:{variant:"success"},on:{click:function(a){return t.returnAndSave()}}},[t._v(" Upload ")])],1)],1)],1),e("b-container",{staticClass:"take-photo"},[e("b-row",[e("b-col",{staticClass:"yourCamera",attrs:{sm:"12"}},[t.isCameraOpen?e("div",{staticClass:"camera-canvas"},[e("video",{ref:"camera",attrs:{width:t.canvasHeight,height:t.canvasWidth,autoplay:"",id:"cameratag"}}),e("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:t.canvasHeight,height:t.canvasWidth}})]):t._e()]),e("b-col",{staticClass:"captureBtn",attrs:{sm:"12"}},[e("b-button",{staticClass:"capturesave",attrs:{pill:"",variant:"outline-success"},on:{click:t.capture}},[e("b-icon-camera-fill"),t._v(" Capture ")],1),e("b-icon-arrow-repeat",{ref:"canshowswitch",staticClass:"flipBtn",attrs:{"font-scale":"1.5"},on:{click:t.switchCam}})],1),null!=this.item?e("div",{staticClass:"imgshow"},[e("img",{attrs:{src:this.item}})]):t._e()],1)],1)],1)},r=[],i=e(144),o={name:"CameraApi",components:{},data(){return{isCameraOpen:!0,canvasHeight:400,canvasWidth:400,mode:"face",twocam:!0,item:[]}},created(){},mounted(){this.startCameraStream()},methods:{startCameraStream(){var t;"face"==this.mode?t={audio:!1,video:{width:{ideal:400},height:{ideal:400},facingMode:"face"}}:"environment"==this.mode&&(t={audio:!1,video:{width:{ideal:400},height:{ideal:400},facingMode:{exact:"environment"}}}),navigator.mediaDevices.getUserMedia(t).then((t=>{this.$refs.camera.srcObject=t})).catch((t=>{alert("Browser doesn't support or there is some errors."+t)}))},stopCameraStream(){let t=this.$refs.camera.srcObject.getTracks();t.forEach((t=>{t.stop()}))},capture(){const t=50;let a=this;setTimeout((()=>{const t=a.$refs.canvas.getContext("2d");t.drawImage(a.$refs.camera,0,0,a.canvasWidth,a.canvasHeight);const e=a.$refs.canvas.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");a.addToPhotoGallery(e),console.log(e)}),t)},addToPhotoGallery(t){this.item=t},returnAndSave(){this.stopCameraStream(),null!=this.item&&(i["default"].prototype.$photo=this.item),this.$router.push("/journal/new")},close(){this.stopCameraStream(),this.$router.push("/journal/new")},switchCam(){this.stopCameraStream(),"environment"==this.mode?this.mode="face":this.mode="environment",this.startCameraStream()}}},c=o,n=e(1001),l=(0,n.Z)(c,s,r,!1,null,"c59f49e6",null),h=l.exports}}]);
//# sourceMappingURL=491.40baa08f.js.map